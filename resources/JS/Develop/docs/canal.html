<!DOCTYPE html>

<html>
<head>
  <title>canal.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page_wrapper">
            <div id="jump_page">
              
                
                <a class="source" href="a_dosis.html">
                  a_dosis.js
                </a>
              
                
                <a class="source" href="a_esp.html">
                  a_esp.js
                </a>
              
                
                <a class="source" href="a_unidad.html">
                  a_unidad.js
                </a>
              
                
                <a class="source" href="adm_reasignar.html">
                  adm_reasignar.js
                </a>
              
                
                <a class="source" href="adm_regs.html">
                  adm_regs.js
                </a>
              
                
                <a class="source" href="adm_regs_docsedit.html">
                  adm_regs_docsedit.js
                </a>
              
                
                <a class="source" href="adm_regs_edit.html">
                  adm_regs_edit.js
                </a>
              
                
                <a class="source" href="apm.html">
                  apm.js
                </a>
              
                
                <a class="source" href="apms.html">
                  apms.js
                </a>
              
                
                <a class="source" href="canal.html">
                  canal.js
                </a>
              
                
                <a class="source" href="canales.html">
                  canales.js
                </a>
              
                
                <a class="source" href="clientes.html">
                  clientes.js
                </a>
              
                
                <a class="source" href="control_venta.html">
                  control_venta.js
                </a>
              
                
                <a class="source" href="datos_pac.html">
                  datos_pac.js
                </a>
              
                
                <a class="source" href="defa.html">
                  defa.js
                </a>
              
                
                <a class="source" href="diff_med.html">
                  diff_med.js
                </a>
              
                
                <a class="source" href="docs_canales.html">
                  docs_canales.js
                </a>
              
                
                <a class="source" href="docs_hist_medico.html">
                  docs_hist_medico.js
                </a>
              
                
                <a class="source" href="docs_hist_paciente.html">
                  docs_hist_paciente.js
                </a>
              
                
                <a class="source" href="docs_medico.html">
                  docs_medico.js
                </a>
              
                
                <a class="source" href="docs_paciente.html">
                  docs_paciente.js
                </a>
              
                
                <a class="source" href="dosis.html">
                  dosis.js
                </a>
              
                
                <a class="source" href="especialidades.html">
                  especialidades.js
                </a>
              
                
                <a class="source" href="funciones.html">
                  funciones.js
                </a>
              
                
                <a class="source" href="generar_venta.html">
                  generar_venta.js
                </a>
              
                
                <a class="source" href="get_apm_info.html">
                  get_apm_info.js
                </a>
              
                
                <a class="source" href="informes.html">
                  informes.js
                </a>
              
                
                <a class="source" href="informes_docs_nue_pres.html">
                  informes_docs_nue_pres.js
                </a>
              
                
                <a class="source" href="informes_nue_pres.html">
                  informes_nue_pres.js
                </a>
              
                
                <a class="source" href="institucion.html">
                  institucion.js
                </a>
              
                
                <a class="source" href="instituciones.html">
                  instituciones.js
                </a>
              
                
                <a class="source" href="listado.html">
                  listado.js
                </a>
              
                
                <a class="source" href="listado_details.html">
                  listado_details.js
                </a>
              
                
                <a class="source" href="log.html">
                  log.js
                </a>
              
                
                <a class="source" href="log_accesos.html">
                  log_accesos.js
                </a>
              
                
                <a class="source" href="login.html">
                  login.js
                </a>
              
                
                <a class="source" href="medico.html">
                  medico.js
                </a>
              
                
                <a class="source" href="medicos.html">
                  medicos.js
                </a>
              
                
                <a class="source" href="modificar_venta.html">
                  modificar_venta.js
                </a>
              
                
                <a class="source" href="nueva_venta.html">
                  nueva_venta.js
                </a>
              
                
                <a class="source" href="paciente.html">
                  paciente.js
                </a>
              
                
                <a class="source" href="pacientes.html">
                  pacientes.js
                </a>
              
                
                <a class="source" href="panel.html">
                  panel.js
                </a>
              
                
                <a class="source" href="panel_mod.html">
                  panel_mod.js
                </a>
              
                
                <a class="source" href="patologia.html">
                  patologia.js
                </a>
              
                
                <a class="source" href="patologias.html">
                  patologias.js
                </a>
              
                
                <a class="source" href="reasignados.html">
                  reasignados.js
                </a>
              
                
                <a class="source" href="reasignar.html">
                  reasignar.js
                </a>
              
                
                <a class="source" href="reporte_360.html">
                  reporte_360.js
                </a>
              
                
                <a class="source" href="reporte_ANMAT.html">
                  reporte_ANMAT.js
                </a>
              
                
                <a class="source" href="reporte_docs_paciente.html">
                  reporte_docs_paciente.js
                </a>
              
                
                <a class="source" href="reporte_filtros.html">
                  reporte_filtros.js
                </a>
              
                
                <a class="source" href="reporte_grilla.html">
                  reporte_grilla.js
                </a>
              
                
                <a class="source" href="reporte_productos.html">
                  reporte_productos.js
                </a>
              
                
                <a class="source" href="reporte_reasignaciones.html">
                  reporte_reasignaciones.js
                </a>
              
                
                <a class="source" href="reporte_ventas.html">
                  reporte_ventas.js
                </a>
              
                
                <a class="source" href="reporte_ventas_apm.html">
                  reporte_ventas_apm.js
                </a>
              
                
                <a class="source" href="reporte_ventas_paciente.html">
                  reporte_ventas_paciente.js
                </a>
              
                
                <a class="source" href="reportes_panel.html">
                  reportes_panel.js
                </a>
              
                
                <a class="source" href="seguridad.html">
                  seguridad.js
                </a>
              
                
                <a class="source" href="unidades.html">
                  unidades.js
                </a>
              
                
                <a class="source" href="usuario.html">
                  usuario.js
                </a>
              
                
                <a class="source" href="usuarios.html">
                  usuarios.js
                </a>
              
            </div>
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>canal.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-comment">/**
 * Created by jgallina on 06/05/2015.
 */</span>
<span class="hljs-keyword">var</span> aplicacion = getCurrentHostname() + <span class="hljs-string">'/'</span> + getUrlHTTP();
 $.getScript(aplicacion + <span class="hljs-string">'/resources/JS/funciones.min.js'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>script is now loaded and executed.
put your dependent JS here.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    $(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    	$(<span class="hljs-string">'.form'</span>)
    	.formValidation({
    		<span class="hljs-attr">framework</span>: <span class="hljs-string">'bootstrap'</span>,
    		<span class="hljs-attr">excluded</span>: <span class="hljs-string">':disabled'</span>,
    		<span class="hljs-attr">icon</span>: {
    			<span class="hljs-attr">valid</span>: <span class="hljs-string">'glyphicon glyphicon-ok'</span>,
    			<span class="hljs-attr">invalid</span>: <span class="hljs-string">'glyphicon glyphicon-remove'</span>,
    			<span class="hljs-attr">validating</span>: <span class="hljs-string">'glyphicon glyphicon-refresh'</span>
    		},
    		<span class="hljs-attr">fields</span>: {
    			<span class="hljs-attr">nombre</span>: {
    				<span class="hljs-attr">message</span>: <span class="hljs-string">'El nombre del canal no es válido'</span>,
    				<span class="hljs-attr">validators</span>: {
    					<span class="hljs-attr">notEmpty</span>: {
    						<span class="hljs-attr">message</span>: <span class="hljs-string">'El nombre del canal no puede quedar vacío'</span>
    					},
    					<span class="hljs-attr">stringLength</span>: {
    						<span class="hljs-attr">min</span>: <span class="hljs-number">2</span>,
    						<span class="hljs-attr">max</span>: <span class="hljs-number">45</span>,
    						<span class="hljs-attr">message</span>: <span class="hljs-string">'El nombre del canal debe contener como mínimo 2 y como máximo 45 letras'</span>
    					},
    					<span class="hljs-attr">regexp</span>: {
    						<span class="hljs-attr">regexp</span>: <span class="hljs-regexp">/^[0-9a-zA-ZñÑáéíóúÁÉÍÓÚ\s'´.']+$/</span>,
    						message: <span class="hljs-string">'Este campo debe contener solo letras y/o números.'</span>
    					}
    				}
    			},
    			<span class="hljs-attr">familia</span>: {
    				<span class="hljs-attr">message</span>: <span class="hljs-string">'La familia no es válida'</span>,
    				<span class="hljs-attr">validators</span>: {
    					<span class="hljs-attr">stringLength</span>: {
    						<span class="hljs-attr">min</span>: <span class="hljs-number">3</span>,
    						<span class="hljs-attr">max</span>: <span class="hljs-number">3</span>,
    						<span class="hljs-attr">message</span>: <span class="hljs-string">'El formato de la familia debe estar formado por 3 caracteres'</span>
    					}
    				}
    			},
    			<span class="hljs-attr">direccion</span>: {
    				<span class="hljs-attr">validators</span>: {
    					<span class="hljs-attr">stringLength</span>: {
    						<span class="hljs-attr">min</span>: <span class="hljs-number">4</span>,
    						<span class="hljs-attr">message</span>: <span class="hljs-string">'La dirección debe contener como mínimo 4 letras'</span>
    					},
    					<span class="hljs-attr">regexp</span>: {
    						<span class="hljs-attr">regexp</span>: <span class="hljs-regexp">/^[0-9a-zA-ZñÑáéíóúÁÉÍÓÚ\s'´.'-;–]+$/</span>,
    						message: <span class="hljs-string">'Este campo debe contener solo letras y/o números.'</span>
    					}
    				}
    			},
    			<span class="hljs-attr">mail</span>: {
    				<span class="hljs-attr">validators</span>: {
    					<span class="hljs-attr">emailAddress</span>: {
    						<span class="hljs-attr">message</span>: <span class="hljs-string">'Por favor, ingrese una dirección de e-mail o deje vacío el campo'</span>
    					},
    					<span class="hljs-attr">regexp</span>: {</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>regexp: /^\w+@[a-zA-Z_]+?.[a-zA-Z]{2,3}$/,</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>								regexp: <span class="hljs-regexp">/^\S+@\S+\.\S+$/</span>, <span class="hljs-comment">//Validación para doble dominio</span>
								message: <span class="hljs-string">'El formato del e-mail no es válido'</span>
							}
						}
					},
					<span class="hljs-attr">dir_tec</span>: {
						<span class="hljs-attr">validators</span>: {
							<span class="hljs-attr">stringLength</span>: {
								<span class="hljs-attr">min</span>: <span class="hljs-number">4</span>,
								<span class="hljs-attr">message</span>: <span class="hljs-string">'El nombre del Director Técnico debe contener como mínimo 4 letras'</span>
							},
							<span class="hljs-attr">regexp</span>: {
								<span class="hljs-attr">regexp</span>: <span class="hljs-regexp">/^[0-9a-zA-ZñÑáéíóúÁÉÍÓÚ\s'´.']+$/</span>,
								message: <span class="hljs-string">'Este campo debe contener solo letras y/o números.'</span>
							}
						}
					},
					<span class="hljs-attr">cont_venta</span>: {
						<span class="hljs-attr">validators</span>: {
							<span class="hljs-attr">stringLength</span>: {
								<span class="hljs-attr">min</span>: <span class="hljs-number">4</span>,
								<span class="hljs-attr">message</span>: <span class="hljs-string">'El contacto de venta debe contener como mínimo 4 caracteres'</span>
							},
							<span class="hljs-attr">regexp</span>: {
								<span class="hljs-attr">regexp</span>: <span class="hljs-regexp">/^[0-9a-zA-ZñÑáéíóúÁÉÍÓÚ\s'´.']+$/</span>,
								message: <span class="hljs-string">'Este campo debe contener solo letras y/o números.'</span>
							}
						}
					},
					<span class="hljs-attr">cont_otro</span>: {
						<span class="hljs-attr">validators</span>: {
							<span class="hljs-attr">stringLength</span>: {
								<span class="hljs-attr">min</span>: <span class="hljs-number">4</span>,
								<span class="hljs-attr">message</span>: <span class="hljs-string">'El contacto debe contener como mínimo 4 caracteres'</span>
							},
							<span class="hljs-attr">regexp</span>: {
								<span class="hljs-attr">regexp</span>: <span class="hljs-regexp">/^[0-9a-zA-ZñÑáéíóúÁÉÍÓÚ\s'´.']+$/</span>,
								message: <span class="hljs-string">'Este campo debe contener solo letras y/o números.'</span>
							}
						}
					},
					<span class="hljs-attr">puntos_entrega</span>: {
						<span class="hljs-attr">validators</span>: {
							<span class="hljs-attr">stringLength</span>: {
								<span class="hljs-attr">min</span>: <span class="hljs-number">4</span>,
								<span class="hljs-attr">message</span>: <span class="hljs-string">'El punto de entrega debe contener como mínimo 4 caracteres'</span>
							},
							<span class="hljs-attr">regexp</span>: {
								<span class="hljs-attr">regexp</span>: <span class="hljs-regexp">/^[0-9a-zA-ZñÑáéíóúÁÉÍÓÚ\s'´.'-;–]+$/</span>,
								message: <span class="hljs-string">'Este campo debe contener solo letras y/o números.'</span>
							}
						}
					},
					<span class="hljs-attr">estado</span>: {
						<span class="hljs-attr">validators</span>: {
							<span class="hljs-attr">notEmpty</span>: {
								<span class="hljs-attr">message</span>: <span class="hljs-string">'El estado no puede quedar vacío'</span>
							}
						}
					}
				}
			})
    	.on(<span class="hljs-string">'success.form.fv'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>Prevent form submission</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>				e.preventDefault();

				<span class="hljs-keyword">var</span> parametros = {
					<span class="hljs-string">"oper"</span>: <span class="hljs-string">"Guardar"</span>,
					<span class="hljs-string">"id"</span>: $(<span class="hljs-string">'#id'</span>).val(),
					<span class="hljs-string">"nombre"</span>: $(<span class="hljs-string">'#nombre'</span>).val(),
					<span class="hljs-string">"familia"</span>: $(<span class="hljs-string">'#familia'</span>).val(),
					<span class="hljs-string">"direccion"</span>: $(<span class="hljs-string">'#direccion'</span>).val(),
					<span class="hljs-string">"mail"</span>: $(<span class="hljs-string">'#mail'</span>).val(),
					<span class="hljs-string">"dir_tec"</span>: $(<span class="hljs-string">'#dir_tec'</span>).val(),
					<span class="hljs-string">"cont_venta"</span>: $(<span class="hljs-string">'#cont_venta'</span>).val(),
					<span class="hljs-string">"cont_otro"</span>: $(<span class="hljs-string">'#cont_otro'</span>).val(),
					
					<span class="hljs-string">"estado"</span>: $(<span class="hljs-string">'#estado'</span>).val()
				};
				$.ajax({
					<span class="hljs-attr">url</span>: aplicacion + <span class="hljs-string">'/ajax/ajx.canal_form.php'</span>,
					<span class="hljs-attr">type</span>: <span class="hljs-string">"POST"</span>,
					<span class="hljs-attr">data</span>: parametros,
					<span class="hljs-attr">success</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">opciones</span>) </span>{
						<span class="hljs-keyword">if</span> (opciones.indexOf(<span class="hljs-string">"ERROR"</span>)  != <span class="hljs-number">0</span>) {
							alert(<span class="hljs-string">'Se registró correctamente.'</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>window.location.href = ‘http://‘ + window.location.hostname + ‘/administrador/docs_canales.php?id=’ + opciones;
window.location.href = aplicacion + ‘/administrador/docs_canales.php?id=’ + opciones;</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>							parent.location.reload();
						}<span class="hljs-keyword">else</span>{
							alert(opciones);
						}
					}
				})
			})
    	.submit(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{
    		e.preventDefault();
    	});

    	$(<span class="hljs-string">'#editDocsCanal'</span>).click(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    		<span class="hljs-built_in">window</span>.location.href = <span class="hljs-string">'docs_canales.php?id='</span> + getQuerystring(<span class="hljs-string">"id"</span>);
    	});
    });
});



<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getCurrentHostname</span>(<span class="hljs-params"></span>)</span>{
	<span class="hljs-keyword">var</span> protocolo, url, var_port, port;

	protocolo = <span class="hljs-built_in">window</span>.location.protocol;
	url = <span class="hljs-built_in">window</span>.location.hostname;
	var_port = <span class="hljs-built_in">window</span>.location.port;

	<span class="hljs-keyword">if</span> (var_port !== <span class="hljs-string">''</span>) {
		port = <span class="hljs-string">':'</span> + var_port;
	} <span class="hljs-keyword">else</span> {
		port = <span class="hljs-string">''</span>;
	}

	<span class="hljs-keyword">return</span> protocolo + <span class="hljs-string">'//'</span> + url + port;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getUrlHTTP</span>(<span class="hljs-params"></span>) </span>{

	<span class="hljs-keyword">var</span> path = <span class="hljs-built_in">window</span>.location.pathname;
	<span class="hljs-keyword">var</span> appName = path.split(<span class="hljs-string">"/"</span>);
	<span class="hljs-keyword">return</span> appName[<span class="hljs-number">1</span>];
}</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
