<!DOCTYPE html>

<html>
<head>
  <title>informes_nue_pres.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page_wrapper">
            <div id="jump_page">
              
                
                <a class="source" href="a_dosis.html">
                  a_dosis.js
                </a>
              
                
                <a class="source" href="a_esp.html">
                  a_esp.js
                </a>
              
                
                <a class="source" href="a_unidad.html">
                  a_unidad.js
                </a>
              
                
                <a class="source" href="adm_reasignar.html">
                  adm_reasignar.js
                </a>
              
                
                <a class="source" href="adm_regs.html">
                  adm_regs.js
                </a>
              
                
                <a class="source" href="adm_regs_docsedit.html">
                  adm_regs_docsedit.js
                </a>
              
                
                <a class="source" href="adm_regs_edit.html">
                  adm_regs_edit.js
                </a>
              
                
                <a class="source" href="apm.html">
                  apm.js
                </a>
              
                
                <a class="source" href="apms.html">
                  apms.js
                </a>
              
                
                <a class="source" href="canal.html">
                  canal.js
                </a>
              
                
                <a class="source" href="canales.html">
                  canales.js
                </a>
              
                
                <a class="source" href="clientes.html">
                  clientes.js
                </a>
              
                
                <a class="source" href="control_venta.html">
                  control_venta.js
                </a>
              
                
                <a class="source" href="datos_pac.html">
                  datos_pac.js
                </a>
              
                
                <a class="source" href="defa.html">
                  defa.js
                </a>
              
                
                <a class="source" href="diff_med.html">
                  diff_med.js
                </a>
              
                
                <a class="source" href="docs_canales.html">
                  docs_canales.js
                </a>
              
                
                <a class="source" href="docs_hist_medico.html">
                  docs_hist_medico.js
                </a>
              
                
                <a class="source" href="docs_hist_paciente.html">
                  docs_hist_paciente.js
                </a>
              
                
                <a class="source" href="docs_medico.html">
                  docs_medico.js
                </a>
              
                
                <a class="source" href="docs_paciente.html">
                  docs_paciente.js
                </a>
              
                
                <a class="source" href="dosis.html">
                  dosis.js
                </a>
              
                
                <a class="source" href="especialidades.html">
                  especialidades.js
                </a>
              
                
                <a class="source" href="funciones.html">
                  funciones.js
                </a>
              
                
                <a class="source" href="generar_venta.html">
                  generar_venta.js
                </a>
              
                
                <a class="source" href="get_apm_info.html">
                  get_apm_info.js
                </a>
              
                
                <a class="source" href="informes.html">
                  informes.js
                </a>
              
                
                <a class="source" href="informes_docs_nue_pres.html">
                  informes_docs_nue_pres.js
                </a>
              
                
                <a class="source" href="informes_nue_pres.html">
                  informes_nue_pres.js
                </a>
              
                
                <a class="source" href="institucion.html">
                  institucion.js
                </a>
              
                
                <a class="source" href="instituciones.html">
                  instituciones.js
                </a>
              
                
                <a class="source" href="listado.html">
                  listado.js
                </a>
              
                
                <a class="source" href="listado_details.html">
                  listado_details.js
                </a>
              
                
                <a class="source" href="log.html">
                  log.js
                </a>
              
                
                <a class="source" href="log_accesos.html">
                  log_accesos.js
                </a>
              
                
                <a class="source" href="login.html">
                  login.js
                </a>
              
                
                <a class="source" href="medico.html">
                  medico.js
                </a>
              
                
                <a class="source" href="medicos.html">
                  medicos.js
                </a>
              
                
                <a class="source" href="modificar_venta.html">
                  modificar_venta.js
                </a>
              
                
                <a class="source" href="nueva_venta.html">
                  nueva_venta.js
                </a>
              
                
                <a class="source" href="paciente.html">
                  paciente.js
                </a>
              
                
                <a class="source" href="pacientes.html">
                  pacientes.js
                </a>
              
                
                <a class="source" href="panel.html">
                  panel.js
                </a>
              
                
                <a class="source" href="panel_mod.html">
                  panel_mod.js
                </a>
              
                
                <a class="source" href="patologia.html">
                  patologia.js
                </a>
              
                
                <a class="source" href="patologias.html">
                  patologias.js
                </a>
              
                
                <a class="source" href="reasignados.html">
                  reasignados.js
                </a>
              
                
                <a class="source" href="reasignar.html">
                  reasignar.js
                </a>
              
                
                <a class="source" href="reporte_360.html">
                  reporte_360.js
                </a>
              
                
                <a class="source" href="reporte_ANMAT.html">
                  reporte_ANMAT.js
                </a>
              
                
                <a class="source" href="reporte_docs_paciente.html">
                  reporte_docs_paciente.js
                </a>
              
                
                <a class="source" href="reporte_filtros.html">
                  reporte_filtros.js
                </a>
              
                
                <a class="source" href="reporte_grilla.html">
                  reporte_grilla.js
                </a>
              
                
                <a class="source" href="reporte_productos.html">
                  reporte_productos.js
                </a>
              
                
                <a class="source" href="reporte_reasignaciones.html">
                  reporte_reasignaciones.js
                </a>
              
                
                <a class="source" href="reporte_ventas.html">
                  reporte_ventas.js
                </a>
              
                
                <a class="source" href="reporte_ventas_apm.html">
                  reporte_ventas_apm.js
                </a>
              
                
                <a class="source" href="reporte_ventas_paciente.html">
                  reporte_ventas_paciente.js
                </a>
              
                
                <a class="source" href="reportes_panel.html">
                  reportes_panel.js
                </a>
              
                
                <a class="source" href="seguridad.html">
                  seguridad.js
                </a>
              
                
                <a class="source" href="unidades.html">
                  unidades.js
                </a>
              
                
                <a class="source" href="usuario.html">
                  usuario.js
                </a>
              
                
                <a class="source" href="usuarios.html">
                  usuarios.js
                </a>
              
            </div>
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>informes_nue_pres.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> inst_ok = <span class="hljs-number">0</span>;
<span class="hljs-keyword">var</span> iSelected = <span class="hljs-string">""</span>;
<span class="hljs-keyword">var</span> aplicacion = getCurrentHostname() + <span class="hljs-string">"/"</span> + getUrlHTTP();
$.getScript(aplicacion + <span class="hljs-string">"/resources/JS/funciones.min.js"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>script is now loaded and executed.
put your dependent JS here.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  $(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> minlength = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">var</span> searchField = <span class="hljs-literal">null</span>;
    searchVal($(<span class="hljs-string">"#inst"</span>).val());
    <span class="hljs-comment">/* ********** Pre-Carga *********** */</span>
    $(<span class="hljs-string">"#inst"</span>).keyup(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">var</span> searchField = $(<span class="hljs-string">"#inst"</span>).val();
      <span class="hljs-keyword">var</span> regex = <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(searchField, <span class="hljs-string">"i"</span>);
      <span class="hljs-keyword">var</span> output = <span class="hljs-string">'&lt;ul class="list-group"&gt;'</span>;
      <span class="hljs-keyword">var</span> count = <span class="hljs-number">1</span>;
      <span class="hljs-keyword">var</span> url_json = <span class="hljs-string">"../ajax/ajx.instituciones.php"</span>;
      <span class="hljs-keyword">if</span> (searchField != <span class="hljs-literal">null</span> &amp;&amp; searchField.length &gt;= minlength) {
        $.getJSON(url_json, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">msg</span>) </span>{
          $.each(msg.data, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">key, val</span>) </span>{
            <span class="hljs-keyword">if</span> (val.nombre.search(regex) != <span class="hljs-number">-1</span>) {
              output += <span class="hljs-string">'&lt;li class="list-group-item link-class"&gt;'</span>;
              output +=
                <span class="hljs-string">'&lt;span class="text-muted" id="span_institucion" i_id="'</span> +
                val.id +
                <span class="hljs-string">'"&gt;'</span> +
                <span class="hljs-string">"&lt;b&gt;"</span> +
                val.nombre +
                <span class="hljs-string">"&lt;/b&gt;"</span>;
              <span class="hljs-keyword">if</span> (count % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>) {
                output += <span class="hljs-string">"&lt;/span&gt;&lt;/li&gt;"</span>;
              }
              count++;
            }
          });</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>output += ‘</div>‘;</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          output += <span class="hljs-string">"&lt;/ul&gt;"</span>;
          $(<span class="hljs-string">"#result_instituciones"</span>).html(output);
        });
      } <span class="hljs-keyword">else</span> {
        $(<span class="hljs-string">"#result_instituciones"</span>).html(<span class="hljs-string">""</span>);
      }
    });

    $(<span class="hljs-string">"#medico"</span>).select2({
      <span class="hljs-attr">placeholder</span>: <span class="hljs-string">"Seleccione un Médico"</span>,
      <span class="hljs-attr">theme</span>: <span class="hljs-string">"bootstrap"</span>,
      <span class="hljs-attr">language</span>: <span class="hljs-string">"es"</span>,
      <span class="hljs-attr">minimumInputLength</span>: <span class="hljs-number">3</span>,
      <span class="hljs-attr">allowClear</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">ajax</span>: {
        <span class="hljs-attr">url</span>: aplicacion + <span class="hljs-string">"/ajax/ajx.medicos.php"</span>,
        <span class="hljs-attr">dataType</span>: <span class="hljs-string">"json"</span>,
        <span class="hljs-attr">delay</span>: <span class="hljs-number">250</span>,
        <span class="hljs-attr">delay</span>: <span class="hljs-number">250</span>,
        <span class="hljs-attr">data</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">params</span>) </span>{
          <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">q</span>: params.term, <span class="hljs-comment">// search term</span>
            <span class="hljs-attr">page</span>: params.page
          };
        },
        <span class="hljs-attr">processResults</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) </span>{
          <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">results</span>: data
          };
        },
        <span class="hljs-attr">cache</span>: <span class="hljs-literal">true</span>
      }
    }).change(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
      $(<span class="hljs-string">".form"</span>).formValidation(<span class="hljs-string">"revalidateField"</span>, <span class="hljs-string">"medico"</span>);
    });

      
    $(<span class="hljs-string">"#dosis"</span>)
      .combobox()
      .change(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        $(<span class="hljs-string">".form"</span>).formValidation(<span class="hljs-string">"revalidateField"</span>, <span class="hljs-string">"dosis"</span>);
      });
    $(<span class="hljs-string">"#unidades"</span>)
      .combobox()
      .change(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        $(<span class="hljs-string">".form"</span>).formValidation(<span class="hljs-string">"revalidateField"</span>, <span class="hljs-string">"unidades"</span>);
      });
    $(<span class="hljs-string">"#institucion"</span>)
      .combobox()
      .change(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        $(<span class="hljs-string">".form"</span>).formValidation(<span class="hljs-string">"revalidateField"</span>, <span class="hljs-string">"institucion"</span>);
      });
    $(<span class="hljs-string">"#canal"</span>)
      .combobox()
      .change(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        $(<span class="hljs-string">".form"</span>).formValidation(<span class="hljs-string">"revalidateField"</span>, <span class="hljs-string">"canal"</span>);
      });

    <span class="hljs-comment">/************************************/</span>

    <span class="hljs-comment">/********* DATATABLE ****************/</span></pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>DATATABLES DE ULTIMAS VENTAS</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    $(<span class="hljs-string">"#UltVenTB"</span>).dataTable({
      <span class="hljs-attr">ajax</span>: {
        <span class="hljs-attr">type</span>: <span class="hljs-string">"POST"</span>,
        <span class="hljs-attr">url</span>: aplicacion + <span class="hljs-string">"/ajax/ajx.informes_ult_vent.php"</span>,
        <span class="hljs-attr">dataSrc</span>: <span class="hljs-string">"data"</span>,
        <span class="hljs-attr">data</span>: {
          <span class="hljs-attr">id</span>: getQuerystring(<span class="hljs-string">"id"</span>)
        }
      },
      <span class="hljs-attr">ordering</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">destroy</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">bFilter</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">bPaginate</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">iDisplayLength</span>: <span class="hljs-number">5</span>,
      <span class="hljs-attr">sPaginationType</span>: <span class="hljs-string">"full_numbers"</span>,
      <span class="hljs-attr">bAutoWidth</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">bLengthChange</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">deferRender</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">columns</span>: [
        {
          <span class="hljs-attr">data</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data, type, dataToSet</span>) </span>{
            <span class="hljs-keyword">if</span> (data.estado.indexOf(<span class="hljs-string">"NP"</span>) == <span class="hljs-number">0</span>) {
              <span class="hljs-keyword">return</span> data.id;
            } <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>$(“#alerta”).show();</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>              <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>;
            }
          }
        }, <span class="hljs-comment">// 0</span></pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>{ “data”: “fecha_venta”}, // 1</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        {
          <span class="hljs-attr">data</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data, type, dataToSet</span>) </span>{
            <span class="hljs-keyword">if</span> (data.estado.indexOf(<span class="hljs-string">"NP"</span>) == <span class="hljs-number">0</span>) {
              <span class="hljs-keyword">return</span> data.fecha_venta;
            } <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>$(“#alerta”).show();</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>              <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>;
            }
          }
        }, <span class="hljs-comment">// 1</span>
        { <span class="hljs-attr">data</span>: <span class="hljs-string">"fecha_receta"</span> }, <span class="hljs-comment">// 2</span>
        { <span class="hljs-attr">data</span>: <span class="hljs-string">"consentimiento"</span> }, <span class="hljs-comment">// 3</span>
        { <span class="hljs-attr">data</span>: <span class="hljs-string">"dosis"</span> }, <span class="hljs-comment">// 4</span>
        { <span class="hljs-attr">data</span>: <span class="hljs-string">"unidades"</span> }, <span class="hljs-comment">// 5</span>
        { <span class="hljs-attr">data</span>: <span class="hljs-string">"medico"</span> }, <span class="hljs-comment">// 6</span>
        { <span class="hljs-attr">data</span>: <span class="hljs-string">"institucion"</span> }, <span class="hljs-comment">// 7</span>
        { <span class="hljs-attr">data</span>: <span class="hljs-string">"canal"</span> }, <span class="hljs-comment">// 8</span>
        { <span class="hljs-attr">data</span>: <span class="hljs-string">"APM"</span> }, <span class="hljs-comment">// 9</span>
        { <span class="hljs-attr">data</span>: <span class="hljs-string">"estado"</span> }, <span class="hljs-comment">// 10</span>
        { <span class="hljs-attr">data</span>: <span class="hljs-string">"documentos"</span> } <span class="hljs-comment">// 11</span>
      ],
      <span class="hljs-attr">columnDefs</span>: [
        {</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>funcion para obtener los iconos de estado en la columna 10</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          render: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data, type, row</span>) </span>{
            <span class="hljs-keyword">var</span> datos = data;
            <span class="hljs-keyword">return</span> estado_icon(data);
          },
          <span class="hljs-attr">targets</span>: [<span class="hljs-number">10</span>],
          <span class="hljs-attr">searchable</span>: <span class="hljs-literal">false</span>
        },
        {</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>funcion para obtener los iconos de estado en la columna 10</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          render: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data, type, row</span>) </span>{
            campo = <span class="hljs-string">'&lt;ul class="docs"&gt;'</span>;
            <span class="hljs-keyword">if</span> (data.indexOf(<span class="hljs-string">";"</span>) &gt; <span class="hljs-number">-1</span>) {
              <span class="hljs-keyword">var</span> string = data.split(<span class="hljs-string">";"</span>);
              <span class="hljs-keyword">var</span> campo = <span class="hljs-string">""</span>;
              <span class="hljs-keyword">for</span> (pos = <span class="hljs-number">0</span>; pos &lt; string.length; pos++) {
                campo += docs_icon(string[pos]);
              }
            } <span class="hljs-keyword">else</span> {
              campo += docs_icon(data);
            }
            <span class="hljs-keyword">return</span> campo + <span class="hljs-string">"&lt;/ul&gt;"</span>;
          },
          <span class="hljs-attr">targets</span>: [<span class="hljs-number">11</span>],
          <span class="hljs-attr">visible</span>: <span class="hljs-literal">true</span>,
          <span class="hljs-attr">searchable</span>: <span class="hljs-literal">false</span>
        },
        {</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>funcion para obtener los iconos de estado en la columna 8</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          targets: [<span class="hljs-number">10</span>],
          <span class="hljs-attr">searchable</span>: <span class="hljs-literal">false</span>
        }
      ],
      <span class="hljs-attr">buttons</span>: [
        {
          <span class="hljs-attr">extend</span>: <span class="hljs-string">"copyHtml5"</span>,
          <span class="hljs-attr">text</span>: <span class="hljs-string">'&lt;i class="fa fa-files-o" aria-hidden="true"&gt;&lt;/i&gt; Copiar'</span>
        },
        {
          <span class="hljs-attr">extend</span>: <span class="hljs-string">"print"</span>,
          <span class="hljs-attr">text</span>: <span class="hljs-string">'&lt;i class="fa fa-print" aria-hidden="true"&gt;&lt;/i&gt; Imprimir'</span>
        },
        {
          <span class="hljs-attr">extend</span>: <span class="hljs-string">"excel"</span>,
          <span class="hljs-attr">text</span>: <span class="hljs-string">'&lt;i class="fa fa-file-excel-o" aria-hidden="true"&gt;&lt;/i&gt; Excel'</span>
        }
      ],
      <span class="hljs-attr">oLanguage</span>: {
        <span class="hljs-attr">sProcessing</span>: <span class="hljs-string">"Procesando..."</span>,
        <span class="hljs-attr">sLengthMenu</span>: <span class="hljs-string">"Mostrar _MENU_ registros"</span>,
        <span class="hljs-attr">sZeroRecords</span>: <span class="hljs-string">"No se encontraron resultados"</span>,
        <span class="hljs-attr">sEmptyTable</span>: <span class="hljs-string">"Ningún dato disponible en esta tabla"</span>,
        <span class="hljs-attr">sInfo</span>:
          <span class="hljs-string">"Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros"</span>,
        <span class="hljs-attr">sInfoEmpty</span>: <span class="hljs-string">"Mostrando registros del 0 al 0 de un total de 0 registros"</span>,
        <span class="hljs-attr">sInfoFiltered</span>: <span class="hljs-string">"(filtrado de un total de _MAX_ registros)"</span>,
        <span class="hljs-attr">sInfoPostFix</span>: <span class="hljs-string">""</span>,
        <span class="hljs-attr">sSearch</span>: <span class="hljs-string">"Buscar:"</span>,
        <span class="hljs-attr">sUrl</span>: <span class="hljs-string">""</span>,
        <span class="hljs-attr">sInfoThousands</span>: <span class="hljs-string">","</span>,
        <span class="hljs-attr">sLoadingRecords</span>: <span class="hljs-string">"Cargando..."</span>,
        <span class="hljs-attr">oPaginate</span>: {
          <span class="hljs-attr">sFirst</span>: <span class="hljs-string">"Primero"</span>,
          <span class="hljs-attr">sLast</span>: <span class="hljs-string">"Último"</span>,
          <span class="hljs-attr">sNext</span>: <span class="hljs-string">"Siguiente"</span>,
          <span class="hljs-attr">sPrevious</span>: <span class="hljs-string">"Anterior"</span>
        },
        <span class="hljs-attr">oAria</span>: {
          <span class="hljs-attr">sSortAscending</span>:
            <span class="hljs-string">": Activar para ordenar la columna de manera ascendente"</span>,
          <span class="hljs-attr">sSortDescending</span>:
            <span class="hljs-string">": Activar para ordenar la columna de manera descendente"</span>
        }
      }
    });
    <span class="hljs-comment">/********* FIN DATABLE **************/</span>
    $(<span class="hljs-string">".form"</span>)
      .formValidation({
        <span class="hljs-attr">framework</span>: <span class="hljs-string">"bootstrap"</span>,
        <span class="hljs-attr">excluded</span>: <span class="hljs-string">":disabled"</span>,
        <span class="hljs-attr">icon</span>: {
          <span class="hljs-attr">valid</span>: <span class="hljs-string">"glyphicon glyphicon-ok"</span>,
          <span class="hljs-attr">invalid</span>: <span class="hljs-string">"glyphicon glyphicon-remove"</span>,
          <span class="hljs-attr">validating</span>: <span class="hljs-string">"glyphicon glyphicon-refresh"</span>
        },
        <span class="hljs-attr">fields</span>: {
          <span class="hljs-attr">patologia</span>: {
            <span class="hljs-attr">validators</span>: {
              <span class="hljs-attr">notEmpty</span>: {
                <span class="hljs-attr">message</span>: <span class="hljs-string">"La patologia no puede quedar vacía"</span>
              }
            }
          },
          <span class="hljs-attr">dosis</span>: {
            <span class="hljs-attr">validators</span>: {
              <span class="hljs-attr">notEmpty</span>: {
                <span class="hljs-attr">message</span>: <span class="hljs-string">"La dosis no puede quedar vacía"</span>
              }
            }
          },
          <span class="hljs-attr">unidades</span>: {
            <span class="hljs-attr">validators</span>: {
              <span class="hljs-attr">notEmpty</span>: {
                <span class="hljs-attr">message</span>: <span class="hljs-string">"Las unidades no puede quedar vacías"</span>
              }
            }
          },
          <span class="hljs-attr">institucion</span>: {
            <span class="hljs-attr">validators</span>: {
              <span class="hljs-attr">notEmpty</span>: {
                <span class="hljs-attr">message</span>: <span class="hljs-string">"La institución no puede quedar vacía"</span>
              },
              <span class="hljs-attr">callback</span>: {
                <span class="hljs-attr">message</span>: <span class="hljs-string">"La institución no se encuentra registrada"</span>,
                <span class="hljs-attr">callback</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">value, validator, $field</span>) </span>{
                  <span class="hljs-keyword">if</span> (inst_ok === <span class="hljs-number">1</span>) {
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
                  } <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
                  }
                }
              }
            }
          },
          <span class="hljs-attr">canal</span>: {
            <span class="hljs-attr">validators</span>: {
              <span class="hljs-attr">notEmpty</span>: {
                <span class="hljs-attr">message</span>: <span class="hljs-string">"El canal no puede quedar vacío"</span>
              }
            }
          },
          <span class="hljs-attr">medico</span>: {
            <span class="hljs-attr">validators</span>: {
              <span class="hljs-attr">notEmpty</span>: {
                <span class="hljs-attr">message</span>: <span class="hljs-string">"El médico no puede quedar vacío"</span>
              }
            }
          }
        }
      })
      .on(<span class="hljs-string">"success.form.fv"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>Prevent form submission</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        e.preventDefault();
        $(<span class="hljs-string">"#cargar_venta"</span>).attr(<span class="hljs-string">"disabled"</span>, <span class="hljs-literal">true</span>);
        <span class="hljs-keyword">var</span> TipoOper = getQuerystring(<span class="hljs-string">"idMst"</span>);
        <span class="hljs-keyword">var</span> msj;

        <span class="hljs-keyword">if</span> (TipoOper != <span class="hljs-string">""</span>) {</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>‘Modificar Venta’</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          <span class="hljs-keyword">var</span> parametros = {
            <span class="hljs-attr">oper</span>: <span class="hljs-string">"Mod_Venta"</span>,
            <span class="hljs-attr">idMst</span>: $(<span class="hljs-string">"#idMst"</span>).val(),
            <span class="hljs-attr">f_venta</span>: $(<span class="hljs-string">"#f_venta"</span>).val(),
            <span class="hljs-attr">patologia</span>: $(<span class="hljs-string">"#patologia"</span>).val(),
            <span class="hljs-attr">dosis</span>: $(<span class="hljs-string">"#dosis"</span>).val(),
            <span class="hljs-attr">unidades</span>: $(<span class="hljs-string">"#unidades"</span>).val(),
            <span class="hljs-attr">institucion</span>: $(<span class="hljs-string">"#id_institucion"</span>).val(),
            <span class="hljs-attr">canal</span>: $(<span class="hljs-string">"#canal"</span>).val(),
            <span class="hljs-attr">medico</span>: $(<span class="hljs-string">"#medico option:selected"</span>).attr(<span class="hljs-string">"value"</span>)
          }; <span class="hljs-comment">//"medico": $('#medico').val()</span>
          msj = <span class="hljs-string">"El registro se modificó correctamente."</span>;
        } <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>‘Nueva_Venta’</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          <span class="hljs-keyword">var</span> parametros = {
            <span class="hljs-attr">oper</span>: <span class="hljs-string">"Nueva_Venta"</span>,
            <span class="hljs-attr">id_paciente</span>: $(<span class="hljs-string">"#id"</span>).val(),
            <span class="hljs-attr">f_venta</span>: $(<span class="hljs-string">"#f_venta"</span>).val(),
            <span class="hljs-attr">patologia</span>: $(<span class="hljs-string">"#patologia"</span>).val(),
            <span class="hljs-attr">dosis</span>: $(<span class="hljs-string">"#dosis"</span>).val(),
            <span class="hljs-attr">unidades</span>: $(<span class="hljs-string">"#unidades"</span>).val(),
            <span class="hljs-attr">institucion</span>: $(<span class="hljs-string">"#id_institucion"</span>).val(),
            <span class="hljs-attr">canal</span>: $(<span class="hljs-string">"#canal"</span>).val(),
            <span class="hljs-attr">medico</span>: $(<span class="hljs-string">"#medico option:selected"</span>).attr(<span class="hljs-string">"value"</span>)
          }; <span class="hljs-comment">//"medico": $('#medico').val()</span>
          msj = <span class="hljs-string">"El registro se generó correctamente."</span>;
        }

        $.ajax({
          <span class="hljs-attr">url</span>: aplicacion + <span class="hljs-string">"/ajax/ajx.informe_nue_pres_form.php"</span>,
          <span class="hljs-attr">type</span>: <span class="hljs-string">"POST"</span>,
          <span class="hljs-attr">data</span>: parametros,
          <span class="hljs-attr">success</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">opciones</span>) </span>{
            <span class="hljs-keyword">if</span> (opciones.indexOf(<span class="hljs-string">"ERROR"</span>) != <span class="hljs-number">0</span>) {
              alert(msj);
              <span class="hljs-built_in">window</span>.location.href =
                aplicacion + <span class="hljs-string">"/main/informes_docs_nue_pres.php?id="</span> + opciones;
            } <span class="hljs-keyword">else</span> {
              alert(opciones);
              $(<span class="hljs-string">"#cargar_venta"</span>).attr(<span class="hljs-string">"disabled"</span>, <span class="hljs-literal">false</span>);
            }
          },
          <span class="hljs-attr">error</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            alert(<span class="hljs-string">"Ocurrió un Error con el envío de la información"</span>);
            $(<span class="hljs-string">"#cargar_venta"</span>).attr(<span class="hljs-string">"disabled"</span>, <span class="hljs-literal">false</span>);
          }
        });
      })
      .submit(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
        e.preventDefault();
      });
  });
  $(<span class="hljs-built_in">document</span>).on(<span class="hljs-string">"change"</span>, <span class="hljs-string">"#inst"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> inputInst = $(<span class="hljs-string">"#inst"</span>).val();

    <span class="hljs-keyword">if</span> (inputInst === iSelected) {
      inst_ok = <span class="hljs-number">1</span>;
      $(<span class="hljs-string">".form"</span>).formValidation(<span class="hljs-string">"revalidateField"</span>, <span class="hljs-string">"institucion"</span>);
    } <span class="hljs-keyword">else</span> {
      inst_ok = <span class="hljs-number">0</span>;
      $(<span class="hljs-string">".form"</span>).formValidation(<span class="hljs-string">"revalidateField"</span>, <span class="hljs-string">"institucion"</span>);
    }
  });
  $(<span class="hljs-built_in">document</span>).on(<span class="hljs-string">"click"</span>, <span class="hljs-string">"#span_institucion"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    iSelected = $(<span class="hljs-keyword">this</span>).text();
    <span class="hljs-keyword">var</span> inputInst = $(<span class="hljs-string">"#inst"</span>).val();

    <span class="hljs-keyword">if</span> (inputInst === iSelected) {
      inst_ok = <span class="hljs-number">1</span>;
      $(<span class="hljs-string">".form"</span>).formValidation(<span class="hljs-string">"revalidateField"</span>, <span class="hljs-string">"institucion"</span>);
    }
    $(<span class="hljs-string">"#result_instituciones"</span>).html(<span class="hljs-string">""</span>);
  });
});

$(<span class="hljs-built_in">document</span>).on(<span class="hljs-string">"click"</span>, <span class="hljs-string">"#span_institucion"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  $(<span class="hljs-string">"#inst"</span>).val($(<span class="hljs-keyword">this</span>).text());
  $(<span class="hljs-string">"#id_institucion"</span>).val($(<span class="hljs-keyword">this</span>).attr(<span class="hljs-string">"i_id"</span>));
  $(<span class="hljs-string">"#result_instituciones"</span>).html(<span class="hljs-string">""</span>);
});

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">searchVal</span>(<span class="hljs-params">val</span>) </span>{
  <span class="hljs-keyword">var</span> searchField = val;
  <span class="hljs-keyword">var</span> valido = <span class="hljs-string">""</span>;
  <span class="hljs-keyword">var</span> count = <span class="hljs-number">1</span>;
  <span class="hljs-keyword">var</span> url_json = <span class="hljs-string">"../ajax/ajx.instituciones.php"</span>;
  $.getJSON(url_json, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">msg</span>) </span>{
    <span class="hljs-keyword">var</span> json = msg.data;
    $.each(json, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">i, v</span>) </span>{
      <span class="hljs-keyword">if</span> (v.nombre === searchField) {
        inst_ok = <span class="hljs-number">1</span>;
      }
    });
  });
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getCurrentHostname</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">var</span> protocolo, url, var_port, port;

  protocolo = <span class="hljs-built_in">window</span>.location.protocol;
  url = <span class="hljs-built_in">window</span>.location.hostname;
  var_port = <span class="hljs-built_in">window</span>.location.port;

  <span class="hljs-keyword">if</span> (var_port !== <span class="hljs-string">""</span>) {
    port = <span class="hljs-string">":"</span> + var_port;
  } <span class="hljs-keyword">else</span> {
    port = <span class="hljs-string">""</span>;
  }

  <span class="hljs-keyword">return</span> protocolo + <span class="hljs-string">"//"</span> + url + port;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getUrlHTTP</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">var</span> path = <span class="hljs-built_in">window</span>.location.pathname;
  <span class="hljs-keyword">var</span> appName = path.split(<span class="hljs-string">"/"</span>);
  <span class="hljs-keyword">return</span> appName[<span class="hljs-number">1</span>];
}</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
